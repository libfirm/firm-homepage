{% extends "parts/base" %}
{% block title %}
	CfOpt2
{% endblock %}
{% block content %}

<p>The current ir/opt/cfopt.c is a mess and does not do enough. A complete rewrite might be appropriate. Here are the requirements for a control-flow optimization:
</p>
<ul><li> remove superfluous Jmp nodes
<ul><li> merge chains of Jmps
</li><li> must not introduce critical edges, though
</li><li> flatten "fans", which might require modifying Phis
</li></ul>
</li><li> convert if and switch without effects, i.e. Cond -&gt; Jmp, where no Phi requires the Cond
</li><li> remove KeepAlive edges, which are duplicates or keep Bads/NoMems
</li><li> must not lose KeepAlive edges
</li><li> reach fix point
</li></ul>

{% endblock %}
